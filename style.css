/* --- THEME VARIABLES --- */
:root {
    --healer-bg: #1e1b24;
    --healer-border: #444;
    --healer-text: #eee;
    --healer-accent: #98c379;
    --healer-highlight: rgba(255,255,255,0.05);
    
    /* Variables for original Settings Panel */
    --smart-theme-color: #4caf50;
    --smart-theme-text: #ffffff;
}

/* =========================================
   1. EXTENSION SETTINGS PANEL (หน้าตั้งค่าเดิม)
   ========================================= */
.html-healer-settings {
    margin-top: 10px;
    border-top: 1px solid rgba(128, 128, 128, 0.4);
    padding-top: 10px;
}
.healer-controls {
    display: flex; align-items: center; justify-content: space-between; margin: 10px 0; padding: 0 5px;
}
.html-healer-settings .menu_button {
    background-color: var(--smart-theme-color, #4caf50);
    color: var(--smart-theme-text, #ffffff);
    text-align: center; font-weight: bold; padding: 10px;
    border-radius: 10px; cursor: pointer; border: 1px solid transparent;
    transition: filter 0.2s; margin-top: 10px;
}
.html-healer-settings .text_pole {
    background-color: rgba(0, 0, 0, 0.3);
    color: var(--smart-theme-text, #fff);
    border: 1px solid #555;
    padding: 5px; border-radius: 5px;
}

/* =========================================
   2. MAGIC WAND BUTTON
   ========================================= */
.healer-wand-btn {
    cursor: pointer; opacity: 0.6; transition: opacity 0.2s, transform 0.2s;
    margin: 0 5px; color: var(--healer-accent); display: inline-block;
}
.healer-wand-btn:hover {
    opacity: 1; transform: scale(1.1); text-shadow: 0 0 5px var(--healer-accent);
}

/* =========================================
   3. POPOVER MENU (เมนูเด้ง)
   ========================================= */
.healer-popover {
    position: absolute; z-index: 20000;
    background: var(--healer-bg); border: 1px solid var(--healer-border);
    border-radius: 6px; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    min-width: 180px; overflow: hidden;
    animation: healer-fadein 0.1s ease-out; font-family: sans-serif;
}
@keyframes healer-fadein { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

.healer-menu-header {
    background: rgba(0,0,0,0.3); padding: 6px 10px;
    font-size: 0.75em; font-weight: bold; color: #aaa;
    border-bottom: 1px solid var(--healer-border);
    display: flex; justify-content: space-between;
}
.healer-menu-item {
    padding: 10px 12px; cursor: pointer; font-size: 0.9em;
    color: var(--healer-text); display: flex; align-items: center; gap: 10px;
    transition: background 0.2s; border-bottom: 1px solid rgba(255,255,255,0.05);
}
.healer-menu-item:hover { background: var(--healer-highlight); }
.healer-menu-item i { width: 18px; text-align: center; }

/* =========================================
   4. MODAL EDITOR (หน้าต่างแยกส่วน)
   ========================================= */
.html-healer-overlay {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 99999; background: rgba(0,0,0,0.85);
    display: flex; align-items: center; justify-content: center;
    backdrop-filter: blur(3px);
}
.html-healer-box {
    width: 90%; max-width: 900px; height: 85vh;
    background: var(--healer-bg); border: 1px solid var(--healer-border);
    border-radius: 10px; display: flex; flex-direction: column;
    box-shadow: 0 0 30px rgba(0,0,0,0.7);
}
.healer-header {
    background: rgba(0,0,0,0.2); padding: 10px 15px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid var(--healer-border);
}
.healer-body { flex: 1; display: flex; flex-direction: column; padding: 10px; overflow: hidden; gap: 10px; }
.editor-row { flex: 1; display: flex; flex-direction: column; border: 1px solid var(--healer-border); border-radius: 6px; overflow: hidden; }
.toolbar { background: rgba(0,0,0,0.2); padding: 5px 10px; font-size: 0.8em; font-weight: bold; color: #888; display: flex; justify-content: space-between; }
textarea.healer-input {
    flex: 1; width: 100%; border: none; background: transparent; 
    color: #ddd; padding: 10px; resize: none; font-family: monospace; outline: none;
}
.healer-footer { padding: 10px; border-top: 1px solid var(--healer-border); text-align: right; }
.btn-save { 
    background: var(--healer-accent); color: #222; border: none; 
    padding: 8px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; 
}
