/* --- 1. SETTINGS PANEL (หน้าตั้งค่า) --- */
.html-healer-settings {
    margin-top: 10px;
    border-top: 1px solid rgba(128, 128, 128, 0.4);
    padding-top: 10px;
}

/* --- 2. MAGIC WAND BUTTON (ปุ่มเวทมนตร์) --- */
.healer-wand-btn {
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.2s ease-in-out;
    margin: 0 4px;
    color: var(--smart-theme-color, #98c379);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 30px; /* บังคับความกว้างให้เท่าปุ่มอื่น */
    height: 30px;
}
.healer-wand-btn:hover {
    opacity: 1;
    transform: scale(1.15);
    text-shadow: 0 0 8px var(--smart-theme-color, #98c379);
}

/* --- 3. POPOVER MENU (เมนูเด้ง) --- */
.healer-popover {
    position: fixed; /* ใช้ fixed เพื่อกันล้นจอ */
    z-index: 99999;
    background: var(--smart-theme-bg, #1e1b24);
    border: 1px solid var(--smart-theme-border, #444);
    border-radius: 6px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.6);
    min-width: 200px;
    font-family: sans-serif;
    overflow: hidden;
    animation: healer-fadein 0.15s ease-out;
}
@keyframes healer-fadein { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

.healer-menu-header {
    background: rgba(0,0,0,0.2);
    padding: 8px 12px;
    font-size: 0.8em;
    font-weight: bold;
    color: var(--smart-theme-text-muted, #888);
    border-bottom: 1px solid var(--smart-theme-border, #444);
    display: flex; justify-content: space-between; align-items: center;
}
.healer-menu-item {
    padding: 12px 15px;
    cursor: pointer;
    font-size: 0.95em;
    color: var(--smart-theme-text, #eee);
    display: flex; align-items: center; gap: 12px;
    transition: background 0.2s;
    border-bottom: 1px solid rgba(255,255,255,0.03);
}
.healer-menu-item:hover { background: rgba(255,255,255,0.08); }
.healer-menu-item:last-child { border-bottom: none; }

/* --- 4. EDITOR MODAL (หน้าต่างแก้ไข) --- */
.html-healer-overlay {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 99990; background: rgba(0,0,0,0.85);
    display: flex; align-items: center; justify-content: center;
    backdrop-filter: blur(4px);
}
.html-healer-box {
    width: 90%; max-width: 900px; height: 85vh;
    background: var(--smart-theme-bg, #1e1b24);
    border: 1px solid var(--smart-theme-border, #444);
    border-radius: 10px;
    display: flex; flex-direction: column;
    box-shadow: 0 0 40px rgba(0,0,0,0.8);
    color: var(--smart-theme-text, #eee);
}
.healer-header {
    background: rgba(0,0,0,0.3); padding: 12px 20px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid var(--smart-theme-border, #444);
    font-size: 1.1em;
}
.healer-body { flex: 1; display: flex; flex-direction: column; padding: 15px; overflow: hidden; gap: 15px; }

.editor-row { 
    flex: 1; display: flex; flex-direction: column; 
    border: 1px solid var(--smart-theme-border, #444); 
    border-radius: 8px; overflow: hidden; background: rgba(0,0,0,0.2);
}
.toolbar { 
    background: rgba(255,255,255,0.05); padding: 8px 15px; 
    font-size: 0.85em; font-weight: bold; color: var(--smart-theme-text-muted, #aaa); 
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid var(--smart-theme-border, #444);
}
textarea.healer-input {
    flex: 1; width: 100%; border: none; background: transparent; 
    color: var(--smart-theme-text, #ddd); padding: 15px; 
    resize: none; font-family: 'Consolas', monospace; outline: none;
    font-size: 14px; line-height: 1.5;
}

.healer-footer { padding: 15px; border-top: 1px solid var(--smart-theme-border, #444); text-align: right; background: rgba(0,0,0,0.2); }
.btn-save { 
    background: var(--smart-theme-color, #98c379); 
    color: var(--smart-theme-text-buttons, #222); 
    border: none; padding: 10px 25px; border-radius: 6px; 
    font-weight: bold; cursor: pointer; transition: filter 0.2s;
}
.btn-save:hover { filter: brightness(1.1); }
